import{atou,addFunctionToResizeEvent,getTriggers,disableSmoothScroll}from'../theme/modules/helpers.min.js';const INTRO_STEPS='steps',INTRO_EXIT_BOOL='isExiting',INTRO_TRIGGER_ONLY='triggeronly',INTRO_TRIGGER_EXCEPT='triggerexcept',INTRO_THEME_FUNCTIONS={oncomplete:{applyOnStep:!1,callBack:""},onexit:{applyOnStep:!1,callBack:"enableSmoothScroll();"},onbeforeexit:{applyOnStep:!1,callBack:""},onchange:{applyOnStep:!0,callBack:""},onbeforechange:{applyOnStep:!0,callBack:""},onafterchange:{applyOnStep:!0,callBack:""}},themeCommonOptions={nextLabel:introNextLabel,prevLabel:introPrevLabel,skipLabel:introSkipLabel,doneLabel:introDoneLabel,hidePrev:!1,hideNext:!1,nextToDone:!0,exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!0,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.8,disableInteraction:!0},introErrorTitle=atou(document.getElementById('intro-error-title').getAttribute('data')),introError=atou(document.getElementById('intro-error').getAttribute('data')),introEmpty=atou(document.getElementById('intro-empty').getAttribute('data')),introErrorStep={showBullets:!1,steps:[{title:introErrorTitle,intro:introError}]},introEmptyStep={showBullets:!1,steps:[{title:introErrorTitle,intro:introEmpty}]},divi=document.getElementsByClassName('sc-intro');for(let a=0;a<divi.length;a++)divi[a].addEventListener('click',function(){disableSmoothScroll();let c=parseIntroOptions(atou(divi[a].getAttribute('intro-data')));c.steps=manageTriggeredSteps(c.steps,getTriggers());let b=introJs();b.setOptions(themeCommonOptions),b.setOptions(manageEmptySteps(c));for(const a in INTRO_THEME_FUNCTIONS)typeof b[a]=='function'&&b[a](function(){INTRO_THEME_FUNCTIONS[a].applyOnStep?(Function(INTRO_THEME_FUNCTIONS[a].callBack)(),this._introItems[this.currentStep()].hasOwnProperty(a)&&Function(this._introItems[this.currentStep()][a])()):(Function(INTRO_THEME_FUNCTIONS[a].callBack)(),c.hasOwnProperty(a)&&Function(c[a])())});const d=function(){b[INTRO_EXIT_BOOL]||(b.isExiting=!0,b.exit(!0))};addFunctionToResizeEvent(d),b.start()});function parseIntroOptions(a){try{let b=JSON.parse(a);return manageElements(manageEmptySteps(b))}catch(a){return introErrorStep.steps[0].intro=introError,introErrorStep}}function manageElements(a){for(let b=0;b<a.steps.length;b++)if(a.steps[b].element)try{a.steps[b].element=document.querySelector(a.steps[b].element)}catch{try{a.steps[b].element=Function('return '+a.steps[b].element)()}catch{return introErrorStep.steps[0].intro=introError+`<br><i>(Step${b}:${a.steps[b].element})</i>`,introErrorStep}}return a}function manageEmptySteps(a){return a.hasOwnProperty(INTRO_STEPS)&&a[INTRO_STEPS].length>0?a:introEmptyStep}function manageTriggeredSteps(a,c){let b=[];for(let d=0;d<a.length;d++)keepSteps(a[d],c)&&(b[b.length]=a[d]);return b}function keepSteps(a,c){let b=!0;if(a.hasOwnProperty(INTRO_TRIGGER_ONLY)){b=!1;for(const d of a[INTRO_TRIGGER_ONLY])if(c.includes(d)){b=!0;break}}if(a.hasOwnProperty(INTRO_TRIGGER_EXCEPT))for(const d of a[INTRO_TRIGGER_EXCEPT])if(c.includes(d)){b=!1;break}return b}